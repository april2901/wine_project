<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì™€ì¸ ì…€ëŸ¬ - ë‚´ ì™€ì¸ ë¦¬ìŠ¤íŠ¸</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cellar.css') }}">
</head>
<body>
    <!-- í”Œë˜ì‹œ ë©”ì‹œì§€ -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-messages">
                {% for category, message in messages %}
                    <div class="flash-{{ category }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    <!-- í—¤ë” -->
    <div class="header">
        <h1>ğŸ· ë‚´ ì™€ì¸ ì…€ëŸ¬</h1>
        <div class="header-right">
            <div class="view-toggle">
                <a href="{{ url_for('index') }}" class="view-button">ğŸ“‹ ë¦¬ìŠ¤íŠ¸ ëª¨ë“œ</a>
                <span class="view-button active">ğŸ  ì…€ëŸ¬ ëª¨ë“œ</span>
            </div>
            {% if session.logged_in %}
                <span class="user-info">{{ session.username }}ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤</span>
                <a href="{{ url_for('add_wine') }}" class="add-button">+ ì™€ì¸ ì¶”ê°€</a>
                <a href="{{ url_for('logout') }}" class="logout-button">ë¡œê·¸ì•„ì›ƒ</a>
            {% else %}
                <div class="guest-info">
                    <span class="guest-text">ê²ŒìŠ¤íŠ¸ ëª¨ë“œ (ë³´ê¸° ì „ìš©)</span>
                    <a href="{{ url_for('login') }}" class="login-button">ë¡œê·¸ì¸</a>
                </div>
            {% endif %}
        </div>
    </div>

    <div class="cellar-container">
        <!-- ì…€ëŸ¬ ì´ë¯¸ì§€ ë° ì„ ë°˜ ì˜¤ë²„ë ˆì´ -->
        <div class="cellar-image-container" id="cellarContainer">
            <!-- ì‹¤ì œ ì…€ëŸ¬ ì´ë¯¸ì§€ ì‚¬ìš© -->
            <img src="{{ url_for('static', filename='images/cellar.png') }}" 
                 alt="ì™€ì¸ ì…€ëŸ¬" class="cellar-image" id="cellarImage">
            
            <!-- ì„ ë°˜ ì˜¤ë²„ë ˆì´ - ì„¸ë¡œë¡œ ì¤‘ì•™ ë°°ì¹˜ -->
            <div class="shelves-overlay">
                {% for shelf in cellar_data %}
                <div class="shelf-indicator shelf-{{ shelf.shelf_number }}" 
                     data-shelf="{{ shelf.shelf_number }}"
                     onclick="selectShelf({{ shelf.shelf_number }})">
                    <div class="shelf-number">ì„ ë°˜ {{ shelf.shelf_number }}</div>
                    <div class="shelf-count">
                        <span class="count">{{ shelf.wine_count }}</span>
                        <span class="capacity">/{{ shelf.max_capacity }}</span>
                    </div>
                    {% if shelf.is_full %}
                    <div class="full-indicator">FULL</div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>

        <!-- ì„ ë°˜ ìƒì„¸ ì •ë³´ -->
        <div class="shelf-detail" id="shelfDetail" style="display: none;">
            <div class="shelf-header">
                <h3 id="shelfTitle">ì„ ë°˜ 1</h3>
                <button class="close-detail" onclick="closeShelfDetail()">âœ•</button>
            </div>
            
            <div class="shelf-wines" id="shelfWines">
                <!-- ì™€ì¸ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/cellar.js') }}"></script>
</body>
</html>